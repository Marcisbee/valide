{"version":3,"file":"valide.js","sources":["../src/helpers.js","../src/index.js"],"sourcesContent":["export function validValue(value) {\n  return !!(typeof value === 'string'\n    || typeof value === 'number'\n    || value);\n}\n\nexport const strings = {\n  en: {\n    invalid_field: 'Invalid field',\n    required: 'Field is required',\n    include: 'Field must include :value',\n    exclude: 'Field must exclude :value',\n    be_equal: 'Field must be equal to :value',\n    not_be_equal: 'Field must not be equal to :value',\n    min_length: 'Min char length is :length',\n    max_length: 'Max char length is :length',\n    invalid_email: 'Email is not valid',\n  },\n};\n\nexport const language = {\n  default: 'en',\n  current: 'en',\n};\n\nexport function translateKey(key, params) {\n  const string = strings[language.current] || strings[language.default];\n\n  if (!string) {\n    console.warn(`[Valide] No keys for language \"${language.current}\" found.`);\n  }\n\n  if (string && !string[key]) {\n    console.warn(`[Valide] No such key \"${key}\" for language \"${language.current}\" found.`);\n  }\n\n  return translateValue(strings[language.current][key], params);\n}\n\nexport function translateValue(value, params = {}) {\n  const paramList = Object.keys(params)\n    .map(value => `:${value}`)\n    .join('|');\n\n  return value.replace(\n    new RegExp(paramList, 'g'),\n    (match) => (\n      params[match.substr(1)] || match\n    )\n  );\n}\n","import {\n  translateKey,\n  translateValue,\n  validValue,\n  language,\n} from './helpers';\n\nexport class Valide {\n  constructor(value) {\n    this.value = value;\n    this.rules = [];\n  }\n\n  register({ type, validate, error }) {\n    let nn = this.rules.push({\n      type: type,\n      validate: value => (validValue(value) && validate(value)),\n      error: error || translateKey('invalid_field'),\n    });\n\n    this.error = (text, params) => {\n      this.rules[nn - 1].error = (text && translateValue(text, params)) || error;\n      return this;\n    }\n\n    return this;\n  }\n\n  valueOf() {\n    return this.check();\n  }\n\n  toString() {\n    return this.check();\n  }\n\n  check(newValue) {\n    if (typeof newValue !== 'undefined') {\n      this.value = newValue;\n    }\n\n    return this.rules.reduce((acc, value) => (\n      typeof acc === 'string' ? acc : (!value.validate(this.value) && value.error) || acc\n    ), true)\n  }\n\n  required() {\n    return this.register({\n      type: 'required',\n      validate: value => value !== '',\n      error: translateKey('required'),\n    })\n  }\n\n  test(regexp) {\n    return this.register({\n      type: 'test',\n      validate: value => value === '' || regexp.test(value),\n      error: translateKey('invalid_field'),\n    })\n  }\n\n  includes(include) {\n    return this.register({\n      type: 'includes',\n      validate: value => value === '' ||\n        (Array.isArray(value) && value.indexOf(include) >= 0)\n        || (typeof value === 'string' && value.indexOf(include) >= 0),\n      error: translateKey('include', { value: include }),\n    })\n  }\n\n  excludes(exclude) {\n    return this.register({\n      type: 'excludes',\n      validate: value => value === '' ||\n        (Array.isArray(value) && value.indexOf(exclude) < 0)\n        || (typeof value === 'string' && value.indexOf(exclude) < 0),\n      error: translateKey('exclude', { value: exclude }),\n    })\n  }\n\n  equal(equal) {\n    return this.register({\n      type: 'equal',\n      validate: value => value === '' || value + '' === equal + '',\n      error: translateKey('be_equal', { value: equal }),\n    })\n  }\n\n  notEqual(equal) {\n    return this.register({\n      type: 'notEqual',\n      validate: value => value === '' || value + '' !== equal + '',\n      error: translateKey('not_be_equal', { value: equal }),\n    })\n  }\n\n  min(num) {\n    return this.register({\n      type: 'min',\n      validate: value => value.length >= num,\n      error: translateKey('min_length', { length: num }),\n    })\n  }\n\n  max(num) {\n    return this.register({\n      type: 'max',\n      validate: value => value.length < num,\n      error: translateKey('max_length', { length: num }),\n    })\n  }\n\n  email() {\n    return this.register({\n      type: 'email',\n      validate: value => value === '' || /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value),\n      error: translateKey('invalid_email'),\n    })\n  }\n\n  static get language() {\n    return language.current;\n  }\n\n  static set language(value) {\n    return language.current = value;\n  }\n\n  static get version() {\n    return '1.0.0';\n  }\n}\n\nif (window) window.Valide = Valide;\n"],"names":["const","this","equal"],"mappings":"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"}