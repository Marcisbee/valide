{"version":3,"file":"valide.es.js","sources":["../src/helpers.js","../src/index.js"],"sourcesContent":["export function validValue(value) {\n  return !!(typeof value === 'string'\n    || typeof value === 'number'\n    || value);\n}\n\nexport const strings = {\n  en: {\n    invalid_field: 'Invalid field',\n    required: 'Field is required',\n    include: 'Field must include :value',\n    exclude: 'Field must exclude :value',\n    be_equal: 'Field must be equal to :value',\n    not_be_equal: 'Field must not be equal to :value',\n    min_length: 'Min char length is :length',\n    max_length: 'Max char length is :length',\n    invalid_email: 'Email is not valid',\n  },\n};\n\nexport const language = {\n  default: 'en',\n  current: 'en',\n};\n\nexport function translateKey(key, params) {\n  const string = strings[language.current] || strings[language.default];\n\n  if (!string) {\n    console.warn(`[Valide] No keys for language \"${language.current}\" found.`);\n  }\n\n  if (string && !string[key]) {\n    console.warn(`[Valide] No such key \"${key}\" for language \"${language.current}\" found.`);\n  }\n\n  return translateValue(strings[language.current][key], params);\n}\n\nexport function translateValue(value, params = {}) {\n  const paramList = Object.keys(params)\n    .map(value => `:${value}`)\n    .join('|');\n\n  return value.replace(\n    new RegExp(paramList, 'g'),\n    (match) => (\n      params[match.substr(1)] || match\n    )\n  );\n}\n","import {\n  translateKey,\n  translateValue,\n  validValue,\n  language,\n} from './helpers';\n\nexport class Valide {\n  constructor(value) {\n    this.value = value;\n    this.rules = [];\n  }\n\n  register({ type, validate, error }) {\n    let nn = this.rules.push({\n      type: type,\n      validate: value => (validValue(value) && validate(value)),\n      error: error || translateKey('invalid_field'),\n    });\n\n    this.error = (text, params) => {\n      this.rules[nn - 1].error = (text && translateValue(text, params)) || error;\n      return this;\n    }\n\n    return this;\n  }\n\n  valueOf() {\n    return this.check();\n  }\n\n  toString() {\n    return this.check();\n  }\n\n  check(newValue) {\n    if (typeof newValue !== 'undefined') {\n      this.value = newValue;\n    }\n\n    return this.rules.reduce((acc, value) => (\n      typeof acc === 'string' ? acc : (!value.validate(this.value) && value.error) || acc\n    ), true)\n  }\n\n  required() {\n    return this.register({\n      type: 'required',\n      validate: value => value !== '',\n      error: translateKey('required'),\n    })\n  }\n\n  test(regexp) {\n    return this.register({\n      type: 'test',\n      validate: value => value === '' || regexp.test(value),\n      error: translateKey('invalid_field'),\n    })\n  }\n\n  includes(include) {\n    return this.register({\n      type: 'includes',\n      validate: value => value === '' ||\n        (Array.isArray(value) && value.indexOf(include) >= 0)\n        || (typeof value === 'string' && value.indexOf(include) >= 0),\n      error: translateKey('include', { value: include }),\n    })\n  }\n\n  excludes(exclude) {\n    return this.register({\n      type: 'excludes',\n      validate: value => value === '' ||\n        (Array.isArray(value) && value.indexOf(exclude) < 0)\n        || (typeof value === 'string' && value.indexOf(exclude) < 0),\n      error: translateKey('exclude', { value: exclude }),\n    })\n  }\n\n  equal(equal) {\n    return this.register({\n      type: 'equal',\n      validate: value => value === '' || value + '' === equal + '',\n      error: translateKey('be_equal', { value: equal }),\n    })\n  }\n\n  notEqual(equal) {\n    return this.register({\n      type: 'notEqual',\n      validate: value => value === '' || value + '' !== equal + '',\n      error: translateKey('not_be_equal', { value: equal }),\n    })\n  }\n\n  min(num) {\n    return this.register({\n      type: 'min',\n      validate: value => value.length >= num,\n      error: translateKey('min_length', { length: num }),\n    })\n  }\n\n  max(num) {\n    return this.register({\n      type: 'max',\n      validate: value => value.length < num,\n      error: translateKey('max_length', { length: num }),\n    })\n  }\n\n  email() {\n    return this.register({\n      type: 'email',\n      validate: value => value === '' || /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value),\n      error: translateKey('invalid_email'),\n    })\n  }\n\n  static get language() {\n    return language.current;\n  }\n\n  static set language(value) {\n    return language.current = value;\n  }\n\n  static get version() {\n    return '1.0.0';\n  }\n}\n\nif (window) window.Valide = Valide;\n"],"names":["const","this","equal"],"mappings":"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"}